<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>Metas de Receita - Grupo DV</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root{
      --bg:#0b1020; --surface:#10172a; --card:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
      --line:rgba(148,163,184,.25); --icon-bg:rgba(255,255,255,.06);
      --shadow:0 20px 60px rgba(2,6,23,.35); --brand:#60a5fa; --brand2:#22d3ee;
    }
    [data-theme="light"]{
      --bg:#f6f7fb; --surface:#fff; --card:#fff; --text:#0f172a; --muted:#475569;
      --line:#e5e7eb; --icon-bg:rgba(2,6,23,.06); --shadow:0 16px 36px rgba(15,23,42,.08);
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:ui-sans-serif,-apple-system,Segoe UI,Roboto,Arial; background:var(--bg); color:var(--text)}

    header{position:sticky;top:0;z-index:40;backdrop-filter:saturate(160%) blur(8px);
      background:color-mix(in srgb,var(--surface) 80%,transparent);border-bottom:1px solid var(--line)}
    .head{max-width:1200px;margin:0 auto;padding:14px 18px;display:flex;align-items:center;gap:12px}
    .brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:inherit}
    .brand img{height:42px}
    .title{font-weight:800;font-size:clamp(18px,1.6vw,22px)}
    .grow{flex:1}
    .btn{border:1px solid var(--line);background:var(--surface);color:var(--text);padding:10px 12px;border-radius:12px;font-weight:800;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
    .btn:hover{box-shadow:var(--shadow);transform:translateY(-1px)}
    .only-desktop{display:inline-flex}
    @media(max-width:900px){.only-desktop{display:none!important}}

    .user{position:relative}
    .user-btn{display:flex;align-items:center;gap:10px;border:1px solid var(--line);background:var(--surface);padding:6px 8px;border-radius:999px;cursor:pointer}
    .user-btn img{width:34px;height:34px;border-radius:50%;object-fit:cover;background:var(--icon-bg)}
    .user-menu{position:absolute;right:0;top:110%;background:var(--surface);border:1px solid var(--line);border-radius:12px;min-width:200px;padding:6px;box-shadow:var(--shadow);display:none}
    .user.open .user-menu{display:block}
    .user-menu a,.user-menu button{padding:10px 12px;border-radius:10px;border:none;background:transparent;color:var(--text);cursor:pointer;font-weight:600;display:block;width:100%;text-align:left}
    .user-menu a:hover,.user-menu button:hover{background:var(--icon-bg)}

    .container{max-width:100%;margin:0 auto;padding:20px 18px}
    .filters{display:grid;grid-template-columns:320px 220px 160px 140px;gap:12px;align-items:end}
    @media(max-width:900px){.filters{grid-template-columns:1fr 1fr}}
    @media(max-width:600px){.filters{grid-template-columns:1fr}}

    .field label{display:block;margin:0 0 6px;color:var(--muted);font-weight:800;font-size:.95rem}
    .picker-btn,select{width:100%;border:1px solid var(--line);background:var(--surface);color:var(--text);border-radius:12px;padding:12px 14px;font-weight:700}
    .action{width:100%}

    /* Cards em grade */
    #painelMetas{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;margin-top:20px}
    .metas-box{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:20px;box-shadow:var(--shadow);cursor:pointer;text-align:center;transition:.2s transform}
    .metas-box:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,.3)}
    .metas-box h2{margin:0 0 8px;font-size:1.1rem;text-transform:uppercase}
    .tooltip{position:relative}
    .tooltip:hover::after{content:attr(data-tip);position:absolute;bottom:110%;left:50%;transform:translateX(-50%);background:#000;color:#fff;padding:6px 10px;border-radius:6px;font-size:.8rem;white-space:nowrap}

    /* Calend√°rio popover */
    .popover{position:absolute;z-index:50;background:var(--surface);color:var(--text);border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);padding:14px;width:min(380px,94vw);display:none}
    .popover.open{display:block}
    .cal-head{display:flex;align-items:center;justify-content:space-between;padding:0 4px 8px}
    .cal-nav{border:1px solid var(--line);background:var(--surface);border-radius:10px;width:34px;height:34px;display:grid;place-items:center;cursor:pointer}
    .dow{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;padding:6px 4px;color:var(--muted);font-weight:800}
    .grid{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;padding:0 4px 8px}
    .day{height:40px;border-radius:12px;display:grid;place-items:center;cursor:pointer;background:color-mix(in srgb,var(--surface) 90%,#fff)}
    .day.sel{background:#2563eb;color:#fff}
    .day.in{background:color-mix(in srgb,#2563eb 18%,var(--surface))}
    .cal-actions{display:flex;gap:8px;justify-content:flex-end;padding-top:6px}
    .btn-sm{border:1px solid var(--line);background:var(--surface);color:var(--text);padding:8px 12px;border-radius:10px;font-weight:800;cursor:pointer}

    /* Modal evolu√ß√£o */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:55}
    .modal.open{display:flex}
    .modal-card{background:var(--surface);border:1px solid var(--line);border-radius:14px;width:min(1100px,96vw);padding:16px;box-shadow:var(--shadow)}
    #graficoEmpresa{width:100%!important;height:380px!important}
  </style>
</head>
<body>
  <!-- header -->
  <header>
    <div class="head">
      <a class="brand" href="#"><img src="https://github.com/ClenaStore/painel-principal/blob/main/img/GRUPO%20DV%20(1).png?raw=true"><span class="title">Metas de Receita</span></a>
      <div class="grow"></div>
      <a class="btn only-desktop" href="#">üìÑ Relat√≥rios</a>
      <button id="themeToggle" class="btn">üåì Tema</button>
      <div class="user" id="userMenu">
        <button class="user-btn"><img src="https://picsum.photos/200" alt=""><strong style="font-size:13px">Leonardo</strong></button>
        <div class="user-menu"><a href="#">üë§ Meu Perfil</a><button>üö™ Sair</button></div>
      </div>
    </div>
  </header>

  <div class="container">
    <!-- filtros -->
    <div class="filters">
      <div class="field" style="position:relative">
        <label>Per√≠odo</label>
        <button id="rangeBtn" class="picker-btn">üóìÔ∏è Selecionar</button>
        <div id="rangeHint" style="margin-top:6px;color:var(--muted);font-weight:800"></div>
        <div id="rangePop" class="popover">
          <div class="cal-head"><button id="prevM" class="cal-nav">‚Äπ</button><strong id="monthLabel"></strong><button id="nextM" class="cal-nav">‚Ä∫</button></div>
          <div class="dow"><span>D</span><span>S</span><span>T</span><span>Q</span><span>Q</span><span>S</span><span>S</span></div>
          <div id="daysGrid" class="grid"></div>
          <div class="cal-actions"><button id="cancelRange" class="btn-sm">Cancelar</button><button id="applyRange" class="btn-sm">Aplicar</button></div>
        </div>
      </div>
      <div class="field"><label>Empresa</label><select id="empresaFiltro"><option>Todas</option></select></div>
      <div class="field"><label>&nbsp;</label><button id="btnFiltrar" class="btn action">Filtrar</button></div>
      <div class="field"><label>&nbsp;</label><button id="btnWhats" class="btn action" style="background:#25d366;color:#fff;border-color:#21b75a">üì≤ WhatsApp</button></div>
    </div>

    <!-- cards -->
    <div id="painelMetas"></div>
  </div>

  <!-- Modal evolu√ß√£o -->
  <div id="modal" class="modal"><div class="modal-card"><h3 id="modalTitle"></h3><canvas id="graficoEmpresa"></canvas></div></div>

<script>
/* simplificado s√≥ para cards bonitos + calend√°rio n√£o fecha at√© aplicar */
const range={start:null,end:null,view:new Date()};let firstPick=true;
const grid=document.querySelector('#daysGrid'),label=document.querySelector('#monthLabel'),pop=document.querySelector('#rangePop');
function renderMonth(){const y=range.view.getFullYear(),m=range.view.getMonth();label.textContent=new Date(y,m).toLocaleDateString('pt-BR',{month:'long',year:'numeric'});grid.innerHTML='';const fd=new Date(y,m,1).getDay(),days=new Date(y,m+1,0).getDate();for(let i=0;i<fd;i++)grid.appendChild(document.createElement('div'));for(let d=1;d<=days;d++){const el=document.createElement('div');el.className='day';el.textContent=d;const cur=new Date(y,m,d);if(range.start&&range.end&&cur>=range.start&&cur<=range.end)el.classList.add('in');if(same(cur,range.start)||same(cur,range.end))el.classList.add('sel');el.onclick=()=>pickDay(cur);grid.appendChild(el);}}
function same(a,b){return a&&b&&a.toDateString()==b.toDateString();}
function pickDay(cur){if(firstPick){range.start=cur;range.end=cur;firstPick=false;}else{if(cur<range.start){range.end=range.start;range.start=cur;}else range.end=cur;firstPick=true;}renderMonth();}
document.querySelector('#rangeBtn').onclick=()=>{pop.classList.toggle('open');renderMonth();};
document.querySelector('#applyRange').onclick=()=>{document.querySelector('#rangeHint').textContent=`${range.start.toLocaleDateString()} ‚Üí ${range.end.toLocaleDateString()}`;pop.classList.remove('open');};
document.querySelector('#cancelRange').onclick=()=>{pop.classList.remove('open');};
document.querySelector('#prevM').onclick=()=>{range.view=new Date(range.view.getFullYear(),range.view.getMonth()-1,1);renderMonth();};
document.querySelector('#nextM').onclick=()=>{range.view=new Date(range.view.getFullYear(),range.view.getMonth()+1,1);renderMonth();};

/* exemplo de cards */
const painel=document.querySelector('#painelMetas');
['MERCATTO DEL√çCIA','DEL√çCIA GOURMET','PADARIA DEL√çCIA'].forEach(emp=>{
  const card=document.createElement('div');
  card.className='metas-box tooltip';
  card.setAttribute('data-tip','Clique para ver evolu√ß√£o');
  card.innerHTML=`<h2>${emp}</h2><p>üí∞ Previsto: R$ 1.000.000,00</p><p>‚úÖ Realizado: R$ 200.000,00</p><p>üìä Atingido: 20%</p>`;
  card.onclick=()=>abrirEvolucao(emp);
  painel.appendChild(card);
});
function abrirEvolucao(emp){document.querySelector('#modalTitle').textContent=`Evolu√ß√£o - ${emp}`;document.querySelector('#modal').classList.add('open');}
document.querySelector('#modal').onclick=e=>{if(e.target.id==='modal')e.target.classList.remove('open');};
</script>
</body>
</html>
